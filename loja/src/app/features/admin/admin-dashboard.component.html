<section class="hero">
  <div class="hero__copy">
    <p class="eyebrow">Painel do admin</p>
    <h1>Pedidos da loja</h1>
    <p class="muted">Acompanhe tudo o que foi comprado e filtre por status para encontrar r√°pido.</p>
  </div>
</section>

<section class="filters">
  <mat-form-field appearance="outline" class="filter-field">
    <mat-label>Status</mat-label>
    <mat-select [value]="statusFiltro()" (selectionChange)="statusFiltro.set($event.value)">
      <mat-option *ngFor="let status of statusDisponiveis()" [value]="status">{{ status }}</mat-option>
    </mat-select>
  </mat-form-field>
</section>

<div class="feedback" *ngIf="pedidoFeedback()">{{ pedidoFeedback() }}</div>
<div class="loading" *ngIf="loadingPedidos()">
  <mat-spinner diameter="32"></mat-spinner>
  <span>Carregando pedidos...</span>
</div>
<p class="muted" *ngIf="!loadingPedidos() && !pedidosFiltrados().length">Nenhum pedido encontrado para este filtro.</p>

<div class="order-grid" *ngIf="!loadingPedidos() && pedidosFiltrados().length">
  <mat-card class="order-card" *ngFor="let pedido of pedidosFiltrados()">
    <mat-card-header>
      <div mat-card-avatar class="avatar"><mat-icon>shopping_bag</mat-icon></div>
      <mat-card-title>Pedido {{ pedido.id }}</mat-card-title>
      <mat-card-subtitle>Cliente: {{ pedido.usuarioId }}</mat-card-subtitle>
      <mat-chip-set aria-label="status do pedido" class="status-chip">
        <mat-chip
          appearance="outlined"
          [ngClass]="statusClass(pedido.status)"
          [disableRipple]="true"
          >{{ pedido.status ?? 'SEM STATUS' }}</mat-chip
        >
      </mat-chip-set>
    </mat-card-header>

    <mat-card-content>
      <div class="items-title">Itens</div>
      <ul>
        <li *ngFor="let item of pedido.itens">
          <mat-icon fontIcon="radio_button_unchecked"></mat-icon>
          <span>{{ nomeDoProduto(item.produtoId) }}</span>
          <span class="muted">x{{ item.quantidade }}</span>
        </li>
      </ul>
    </mat-card-content>
  </mat-card>
</div>
